#常用图片格式
##JPEG
* 简介
	* JPEG 是Joint Photographic Experts Group（联合图像专家小组）的缩写，是第一个国际图像压缩标准。JPEG图像压缩算法能够在提供良好的压缩性能的同时，具有比较好的重建质量，被广泛应用于图像、视频处理领域。人们日常碰到的“.jpeg”、‘’.jpg“等指代的是图像数据经压缩编码后在媒体上的封存形式，不能与JPEG压缩标准混为一谈。
	* JPEG本身只有描述如何将一个影像转换为字节的数据串流（streaming），但并没有说明这些字节如何在任何特定的储存媒体上被封存起来。.jpeg/.jpg是最常用的图像文件格式，由一个软件开发联合会组织制定，是一种有损压缩格式，能够将图像压缩在很小的储存空间，图像中重复或不重要的资料会被丢失，因此容易造成图像数据的损伤。
	* JPEG压缩技术十分先进，它用有损压缩方式去除冗余的图像数据，在获得极高的压缩率的同时能展现十分丰富生动的图像，换句话说，就是可以用最少的磁盘空间得到较好的图像品质。
	* JPEG格式压缩的主要是高频信息，对色彩的信息保留较好，适合应用于互联网，可减少图像的传输时间，可以支持24bit真彩色，也普遍应用于需要连续色调的图像。
	* 在 Photoshop软件中以JPEG格式储存时，提供11级压缩级别，经过多次比较，采用第8级压缩为存储空间与图像质量兼得的最佳比例。
	
##JPEG2000
* 简介
	* JPEG2000作为JPEG的升级版，其压缩率比JPEG高约30%左右，同时支持有损和无损压缩。JPEG2000格式有一个极其重要的特征在于它能实现渐进传输，即先传输图像的轮廓，然后逐步传输数据，不断提高图像质量，让图像由朦胧到清晰显示。此外，JPEG2000还支持所谓的"感兴趣区域" 特性，可以任意指定影像上感兴趣区域的压缩质量，还可以选择指定的部分先解压缩。
	* JPEG2000和JPEG相比优势明显，从无损压缩到有损压缩可以兼容，而JPEG不行，JPEG的有损压缩和无损压缩是完全不同的两种方法。JPEG2000即可应用于传统的JPEG市场，如扫描仪、数码相机等，又可应用于新兴领域，如网路传输、无线通讯等等。
##TIFF
* 设计目的
	* TIFF的最初设计目的是为1980年中期桌面扫描仪达成一个公用的图像文件格式。
* 灵活选项
	* TIFF 是一个灵活适应性强的文件格式，通过在文件头中包含“标签”它能够在一个文件中处理多幅图像和数据。标签能够标明图像的如图像大小这样的基本几何尺寸或者定义图像数据是如何排列的并且是否使用了各种各样的图像压缩选项。
* 图像格式
	* TIFF是最复杂的一种位图文件格式。TIFF是基于标记的文件格式，它广泛地应用于对图像质量要求较高的图像的存储与转换。由于它的结构灵活和包容性大，它已成为图像文件格式的一种标准，绝大多数图像系统都支持这种格式。
	* 用Photoshop 编辑的TIFF文件可以保存路径和图层。 
* TIFF漏洞
	* TIFF图像文件格式是个漏洞百出的格式，不管在PSP上，还是在PS上，甚至在iphone上都频繁出现，windows，linux，苹果的mac操作系统也曾经出现过TIFF漏洞，远程攻击者可能利用此漏洞通过诱使用户打开恶意文档控制用户系统，微软也在这个漏洞上摔过几次，sony更是在这种格式上吃了不少亏，相信有PS3的同学都知道PS3防破解如此完美但还是出现了tiff漏洞，甚至传出可用tiff漏洞运行ps2游戏的传闻（虽然最后证明是假的），但毕竟这也是方向之一，PS2也出现了TIFF漏洞，并被用来升级固件，以前的psp也出现过tiff漏洞，并且被利用过一次，相关信息请看ps。  
##BMP
* 简介
	* BMP（全称Bitmap）是Windows操作系统中的标准图像文件格式，可以分成两类：设备相关位图（DDB）和设备无关位图（DIB ），使用非常广。它采用位映射存储格式，除了图像深度可选以外，不采用其他任何压缩，因此，BMP文件所占用的空间很大。BMP文件的图像深度可选lbit、4bit、8bit及24bit。BMP文件存储数据时，图像的扫描方式是按从左到右、从下到上的顺序。由于BMP文件格式是Windows环境中交换与图有关的数据的一种标准，因此在Windows环境中运行的图形图像软件都支持BMP图像格式。
* 格式组成
	* 1：位图头文件数据结构，它包含BMP图像文件的类型、显示内容等信息；
	* 2：位图信息数据结构，它包含有BMP图像的宽、高、压缩方法，以及定义颜色等信息；
	* 3：调色板，这个部分是可选的，有些位图需要调色板，有些位图，比如真彩色图（24位的BMP）就不需要调色板；
	* 4：位图数据，这部分的内容根据BMP位图使用的位数不同而不同，在24位图中直接使用RGB，而其他的小于24位的使用调色板中颜色索引值。
* 格式类型
	* 位图一共有两种类型，即：设备相关位图（DDB）和设备无关位图（DIB）。DDB位图在早期的Windows系统（Windows 3.0以前）中是很普遍的，事实上它也是唯一的。然而，随着显示器制造技术的进步，以及显示设备的多样化，DDB位图的一些固有的问题开始浮现出来了。比如，它不能够存储（或者说获取）创建这张图片的原始设备的分辨率，这样，应用程序就不能快速的判断客户机的显示设备是否适合显示这张图片。为了解决这一难题，微软创建了DIB位图格式。
* DIB位图包含下列的颜色和尺寸信息：
	* 原始设备（即创建图片的设备）的颜色格式。
	* 原始设备的分辨率。
	* 原始设备的调色板
	* 一个位数组，由红、绿、蓝（RGB）三个值代表一个像素。
	* 一个数组压缩标志，用于表明数据的压缩方案（如果需要的话）。
* 文件部分
	* 图像文件头
		* 1）1-2：(这里的数字代表的是字节，下同）图像文件头。0x4d42=’BM’，表示是Windows支持的BMP格式。(注意：查ascii表B 0x42,M0x4d,bfType 为两个字节，B为low字节，M为high字节所以bfType=0x4D42，而不是0x424D，请注意)
		* 2）3-6：整个文件大小。4690 0000，为00009046h=36934。
		* 3）7-8：保留，必须设置为0。
		* 4）9-10：保留，必须设置为0。
		* 5）11-14：从文件开始到位图数据之间的偏移量(14+40+4*（2^biBitCount）)(在有颜色板的情况下)。4600 0000，为00000046h=70，上面的文件头就是35字=70字节。
	* 位图信息头
		* 6）15-18：位图图信息头长度。
		* 7) 19-22：位图宽度，以像素为单位。8000 0000，为00000080h=128。
		* 8）23-26：位图高度，以像素为单位。9000 0000，为00000090h=144。
		* 9）27-28：位图的位面数，该值总是1。0100，为0001h=1。
		* 10）29-30：每个像素的位数。有1（单色），4（16色），8（256色），16（64K色，高彩色），24（16M色，真彩色），32（4096M色，增强型真彩色）。1000为0010h=16。
		* 11）31-34：压缩说明：有0（不压缩），1（RLE 8，8位RLE压缩），2（RLE 4，4位RLE压缩，3（Bitfields，位域存放）。RLE简单地说是采用像素数+像素值的方式进行压缩。T408采用的是位域存放方式，用两个字节表示一个像素，位域分配为r5b6g5。图中0300 0000为00000003h=3(这张图片不存在颜色板)。
		* 11）31-34：压缩说明：有0（不压缩），1（RLE 8，8位RLE压缩），2（RLE 4，4位RLE压缩，3（Bitfields，位域存放）。RLE简单地说是采用像素数+像素值的方式进行压缩。T408采用的是位域存放方式，用两个字节表示一个像素，位域分配为r5b6g5。图中0300 0000为00000003h=3(这张图片不存在颜色板)。
		* 11）31-34：压缩说明：有0（不压缩），1（RLE 8，8位RLE压缩），2（RLE 4，4位RLE压缩，3（Bitfields，位域存放）。RLE简单地说是采用像素数+像素值的方式进行压缩。T408采用的是位域存放方式，用两个字节表示一个像素，位域分配为r5b6g5。图中0300 0000为00000003h=3(这张图片不存在颜色板)。
		* 12）35-38：用字节数表示的位图数据的大小，该数必须是4的倍数，数值上等于:一行所占的字节数×位图高度。0090 0000为00009000h=80×90×2h=36864。假设位图是24位,宽为41，高为30，则数值= (biWidth*biBitCount+31)/32*4*biHeight,即=(41*24+31)/32*4*30=3720
		* 13）39-42：用象素/米表示的水平分辨率。A00F 0000为0000 0FA0h=4000。
		* 14）43-46：用象素/米表示的垂直分辨率。A00F 0000为0000 0FA0h=4000。
		* 15）47-50：位图使用的颜色索引数。设为0的话，则说明使用所有调色板项。
		* 16）51-54：对图象显示有重要影响的颜色索引的数目。如果是0，表示都重要。
			彩色板
		* 17）（55+0）到（50-1+2^biBitCount）：彩色板规范。对于调色板中的每个表项，用下述方法来描述RGB的值：
			1字节用于蓝色分量
			1字节用于绿色分量
			1字节用于红色分量
			1字节用于填充符（设置为0)
			对于24-位真彩色图像就不使用彩色板，因为位图中的RGB值就代表了每个象素的颜色。
			如，彩色板为00F8 0000 E007 0000 1F00 0000 0000 0000，其中：
			00F8为F800h = 1111 1000 0000 0000（二进制），是蓝色分量的掩码。
			E007 为 07E0h = 0000 0111 1110 0000（二进制），是绿色分量的掩码。
			1F00为001Fh = 0000 0000 0001 [1]  1111（二进制），是红色分量的掩码。
			0000 总设置为0。
			将掩码跟像素值进行“与”运算再进行移位操作就可以得到各色分量值。看看掩码，就可以明白事实上在每个像素值的两个字节16位中，按从高到低取5、6、5位分别就是r、g、b分量值。取出分量值后把r、g、b值分别乘以8、4、8就可以补齐第个分量为一个字节，再把这三个字节按rgb组合，放入存储器（同样要反序），就可以转换为24位标准BMP格式了。
			图像数据阵列
		* 18) 55（无调色板）-bfSize：每两个字节表示一个像素。阵列中的第一个字节表示位图左下角的象素，而最后一个字节表示位图右上角的象素。
			//----图像处理-----BMP为DIB类型，从底向上显示---------
			//阵列中的第一个字节表示位图左下角的象素，而最后一个字节表示位图右上角的象素。
			//下面的代码可以完成第一个字节表示位图左上角的象素，而最后一个字节表示位图右下角的象素，即正常的显示状态，便于操作。
* 存储尺寸
	* BMP文件大小约等于 54+4*2的n次方+（w*h*n)/8，其中高度和宽度都是像素数。需要注意的是上面公式中的54是位图文件的文件头，是彩色调色板的大小。另外需要注意的是这是一个近似值，对于n位的位图图像来说，尽管可能有最多2n中颜色，一个特定的图像可能并不会使用这些所有的颜色。由于彩色调色板仅仅定义了图像所用的颜色，所以实际的彩色调色板将小于。
	
		```int m,n;
		unsigned char k;
		m = BMPPIC.BMPInfoHead.biWidth/8; //24
		n = BMPPIC.BMPInfoHead.biHeight; //96, 24*96 = 2304 bytes
		for(int i=0; i < n/2; i++ )
		{
		for(int a=0; a < m; a++ )
		{
		k = pbufout1[m*(n-i-1) + a];
		pbufout1[m*(n-i-1) + a] = pbufout1[i*m + a];
		pbufout1[i*m + a] = k;
		}
		}
		```
		
##ICO（Windows的图标文件格式）
它是Windows的图标文件格式的一种，可以存储单个图案、多尺寸、多色板的图标文件。

##ICNS
mac图标文件格式
##GIF
* 简介
	* GIF(Graphics Interchange Format)的原义是“图像互换格式”，是CompuServe公司在 1987年开发的图像文件格式。GIF文件的数据，是一种基于LZW算法的连续色调的无损压缩格式。其压缩率一般在50%左右，它不属于任何应用程序。目前几乎所有相关软件都支持它，公共领域有大量的软件在使用GIF图像文件。GIF图像文件的数据是经过压缩的，而且是采用了可变长度等压缩算法。GIF格式的另一个特点是其在一个GIF文件中可以存多幅彩色图像，如果把存于一个文件中的多幅图像数据逐幅读出并显示到屏幕上，就可构成一种最简单的动画.它采用无损压缩技术，只要图像不多于256色，则可既减少文件的大小，又保持成像的质量。（当然，现在也存在一些hack技术，在一定的条件下克服256色的限制，具体参见真彩色）
* 分类
	* GIF分为静态GIF和动画GIF两种，扩展名为.gif，是一种压缩位图格式，支持透明背景图像，适用于多种操作系统，“体型”很小，网上很多小动画都是GIF格式。其实GIF是将多幅图像保存为一个图像文件，从而形成动画，最常见的就是通过一帧帧的动画串联起来的搞笑gif图，所以归根到底GIF仍然是图片文件格式。但GIF只能显示256色。和jpg格式一样，这是一种在网络上非常流行的图形文件格式。
	<!--* ![](http://baike.baidu.com/pic/GIF/217778/0/7af40ad162d9f2d339d2a789abec8a136227cc91?fr=lemma&ct=single)-->
 
##PNG
* 简介
	* PNG，图像文件存储格式，其设计目的是试图替代GIF和TIFF文件格式，同时增加一些GIF文件格式所不具备的特性。PNG的名称来源于“可移植网络图形格式(Portable Network Graphic Format，PNG)”，也有一个非官方解释“PNG's Not GIF”，是一种位图文件(bitmap file)存储格式，读作“ping”。PNG用来存储灰度图像时，灰度图像的深度可多到16位，存储彩色图像时，彩色图像的深度可多到48位，并且还可存储多到16位的α通道数据。PNG使用从LZ77派生的无损数据压缩算法，一般应用于JAVA程序、网页或S60程序中，原因是它压缩比高，生成文件体积小
	
##WebP
* WebP格式，谷歌（google）开发的一种旨在加快图片加载速度的图片格式。图片压缩体积大约只有JPEG的2/3，并能节省大量的服务器带宽资源和数据空间。Facebook Ebay等知名网站已经开始测试并使用WebP格式。
  但WebP是一种有损压缩。相较编码JPEG文件，编码同样质量的WebP文件需要占用更多的计算资源。
* 与JPEG相同，WebP是一种有损压缩。但谷歌表示，这种格式的主要优势在于高效率。他们发现，“在质量相同的情况下，WebP格式图像的体积要比JPEG格式图像小40%。谷歌浏览器已经支持webp格式，Opera在版本号Opera11.10后也增加了支持，然而火狐和ie暂时还不支持webp格式，可以采用flash插件来显示webp，当然这样会耗费一些性能。
* 美中不足的是，WebP格式图像的编码时间“比JPEG格式图像长8倍”。
	分析人士认为，尽管WebP格式尚未像JPEG格式那样，得到各种软硬件的广泛支持，但谷歌推广这一格式的优势在于Chrome浏览器。这款谷歌开发的浏览器的市场份额已达10%以上。
##Other


